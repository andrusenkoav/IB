<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:osgi="http://www.springframework.org/schema/osgi"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd">


    <osgi:service id="userService"
                  ref="userDAOImpl"
                  interface="ru.ibank.db.dao.user.UserDAO"/>



    <osgi:service id="postgresqlDataSource"
                    ref="dataSource"
                    interface="javax.sql.DataSource"/>

    <osgi:service id="postgresqlXADataSource"
                  ref="xaDataSource"
                  interface="javax.sql.XADataSource">
        <service-properties>
            <entry key="aries.xa.name" value="postgresqlDS"/>
            <entry key="aries.xa.pooling" value="true"/>
            <entry key="aries.xa.poolMinSize" value="10"/>
            <entry key="aries.xa.poolMaxSize" value="100"/>
            <entry key="aries.xa.transaction" value="xa"/>
            <entry key="aries.xa.partitionStrategy" value="none"/>
            <entry key="aries.xa.allConnectionsEquals" value="false"/>
        </service-properties>
    </osgi:service>

</beans>
